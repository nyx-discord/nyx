"use strict";(self.webpackChunk_nyx_discord_docs=self.webpackChunk_nyx_discord_docs||[]).push([[695],{4584:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>h,contentTitle:()=>l,default:()=>p,frontMatter:()=>m,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"features/commands/command-overview","title":"\ud83d\udcbb Commands","description":"Hey there \ud83d\udc4b!  This guide is here to give you a fast understanding of how nyx\'s command system works, so you can use it","source":"@site/docs/features/commands/command-overview.mdx","sourceDirName":"features/commands","slug":"/features/commands/command-overview","permalink":"/nyx/docs/features/commands/command-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/features/commands/command-overview.mdx","tags":[],"version":"current","frontMatter":{"title":"\ud83d\udcbb Commands"},"sidebar":"nyxSidebar","previous":{"title":"\ud83d\udce3 Event Manager Event Bus","permalink":"/nyx/docs/features/events/event-manager-bus"},"next":{"title":"\ufe0f\ud83d\ude80 Standalone Command","permalink":"/nyx/docs/features/commands/commands/standalone-command"}}');var a=o(3159),s=o(5912),r=o(5610),d=o(7598),i=(o(1855),o(8759));function c(){const e=[{label:(0,a.jsxs)("p",{children:["Discord.js"," ",(0,a.jsx)("a",{href:"https://discord.js.org/docs/packages/discord.js/stable/Client:Class",children:(0,a.jsx)("code",{children:"Client"})})]}),color:"#3f37c9",id:"client"},{label:(0,a.jsxs)("p",{children:["\ud83d\ude8c ",(0,a.jsxs)("a",{href:"../events/event-overview#-subscribing-to-the-client",children:["Client ",(0,a.jsx)("code",{children:"EventBus"})]})]}),color:"#F78C6B",id:"clientBus"},{label:(0,a.jsxs)("p",{children:["\ud83d\udc42 ",(0,a.jsx)("a",{href:"./command-subscribers",children:(0,a.jsx)("code",{children:"CommandInteractionSubscriber"})})]}),color:"#0f83a9",id:"subscriber"},{label:(0,a.jsxs)("p",{children:["\ud83d\udcbc ",(0,a.jsx)("a",{href:"./command-manager",children:(0,a.jsx)("code",{children:"CommandManager"})})]}),color:"#EF476F",id:"manager"},{label:(0,a.jsxs)("p",{children:["\ud83d\udcd4 ",(0,a.jsx)("a",{href:"./command-repository",children:(0,a.jsx)("code",{children:"CommandRepository"})})]}),color:{dark:"#06D6A0",light:"#038866"},id:"repo"},{label:(0,a.jsxs)("p",{children:["\ud83d\udd00 ",(0,a.jsx)("a",{href:"./command-resolver",children:(0,a.jsx)("code",{children:"CommandResolver"})})]}),color:"#0CB0A9",id:"resolver"},{label:(0,a.jsxs)("p",{children:["\u26a1 ",(0,a.jsx)("a",{href:"./command-executor",children:(0,a.jsx)("code",{children:"CommandExecutor"})})]}),color:{dark:"#FFD166",light:"#ffba1a"},id:"executor"},{label:(0,a.jsxs)("p",{children:["\ufe0f\ud83d\udee1\ufe0f  ",(0,a.jsx)("a",{href:"./command-interception#-command-middlewares",children:(0,a.jsx)("code",{children:"MiddlewareList"})})]}),color:"#6a994e",id:"middleware"},{label:(0,a.jsxs)("p",{children:["\ud83d\udcab ",(0,a.jsx)("a",{href:"../error/error-handling",children:(0,a.jsx)("code",{children:"ErrorHandler"})})]}),color:"#92162D",id:"errorHandler"}],n=[{from:"client",steps:[{to:"clientBus",label:(0,a.jsx)("code",{children:"interactionCreate"}),animated:!0},{to:"subscriber",label:"Call subscribers",animated:!0},{to:"manager",label:"Pass interaction"}]},{from:"manager",to:"repo",label:"Get all commands"},{from:"manager",to:"resolver",label:"Search executable command"},{from:"manager",to:"executor",label:"Pass found command to begin execution"},{from:"executor",to:"middleware",label:"Check middleware list",tooltip:"If there are middlewares registered"},{from:"middleware",to:"middleware",label:"Check all registered middlewares"},{from:"middleware",to:"executor",label:"Return allowed or denied",tooltip:"Workflow ends if denied"},{from:"executor",to:"executor",label:"Execute command",animated:!0},{from:"executor",to:"errorHandler",label:"Pass thrown errors, if any",tooltip:"Workflow ends if it errored",animated:!0},{from:"executor",to:"manager",label:"Finish execution",tooltip:(0,a.jsxs)("p",{children:["Emits ",(0,a.jsx)("code",{children:"CommandEventEnum.CommandRun"})]})}];return(0,i.$)({actors:e,events:n,id:"command-overview",height:"45vh",defaultViewport:{x:-50,y:0,zoom:.32}})}const m={title:"\ud83d\udcbb Commands"},l="\ud83d\udcbb Commands",h={},u=[{value:"\ud83d\udcda Description",id:"-description",level:2},{value:"\ud83d\udd22 Slash command execution sequence",id:"-slash-command-execution-sequence",level:2},{value:"\ud83d\udcda Creating a command",id:"-creating-a-command",level:2},{value:"\u2728 Quick examples",id:"-quick-examples",level:2},{value:"\ud83d\udd1c Next...",id:"-next",level:2}];function x(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"-commands",children:"\ud83d\udcbb Commands"})}),"\n","\n",(0,a.jsx)(n.p,{children:"Hey there \ud83d\udc4b!  This guide is here to give you a fast understanding of how nyx's command system works, so you can use it\nright away. For in-depth details, see the respective guides of each command related object."}),"\n",(0,a.jsx)(n.h2,{id:"-description",children:"\ud83d\udcda Description"}),"\n",(0,a.jsxs)(n.p,{children:["The command system in nyx is made up of several objects that work together to receive commands from users and routing\nsaid execution to the correspondent command object, all coordinated by a ",(0,a.jsx)(n.code,{children:"CommandManager"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"Specifically, the command related objects are:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-manager",children:(0,a.jsx)(n.code,{children:"\ud83d\udcbc CommandManager"})}),": The entry point for the command system, holding all the command-related objects and methods that use all of these objects. All objects below are contained here."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-customid-codec",children:(0,a.jsx)(n.code,{children:"\ud83d\udcac CommandCustomIdCodec"})}),": De/serializes commands names to/from customId strings, useful for creating message components that will trigger commands."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-resolver",children:(0,a.jsx)(n.code,{children:"\ud83d\udd00 CommandResolver"})}),": Resolves the command that a given command interaction refers to."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-executor",children:(0,a.jsx)(n.code,{children:"\u26a1 CommandExecutor"})}),": Executes commands, checking its ",(0,a.jsx)(n.code,{children:"CommandMiddlewareList"})," and passing errors to the ",(0,a.jsx)(n.a,{href:"../../error/error-handling",children:(0,a.jsx)(n.code,{children:"\ud83d\udcab ErrorHandler"})}),"."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-repository",children:(0,a.jsx)(n.code,{children:"\ud83d\udcd4 CommandRepository"})}),": Stores all the currently registered commands."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-deployer",children:(0,a.jsx)(n.code,{children:"\ud83e\ude90 CommandDeployer"})}),": Deploys commands to Discord and stores the ApplicationCommand mappings."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-subscribers",children:(0,a.jsx)(n.code,{children:"\ud83d\udc42 CommandSubscriptionsContainer"})}),": Stores the ",(0,a.jsx)(n.a,{href:"../events/event-subscriber",children:"\ud83d\udce9 Event Subscribers"})," that are subscribed to the ",(0,a.jsx)(n.a,{href:"/nyx/docs/features/events/event-manager#-client-event-bus",children:"\ud83d\udc42 Client event bus"})," to listen for command interactions."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-bus",children:(0,a.jsx)(n.code,{children:"\ud83d\udce3 EventBus"})}),": An ",(0,a.jsx)(n.a,{href:"../events/event-bus",children:"\ud83d\udce3 Event Bus"})," that emits command related events."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"As well as the actual commands:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/commands/standalone-command",children:(0,a.jsx)(n.code,{children:"\ud83d\ude80 Standalone Command"})}),": A slash command with no children."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"\ud83e\uddfe Context Menu Command"}),": A context menu command (either User or Message)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/commands/parent-command",children:(0,a.jsx)(n.code,{children:"\ufe0f\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66 Parent Command"})}),": A non-executable command that only serves to store subcommands or subcommand groups."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/commands/subcommand",children:(0,a.jsx)(n.code,{children:"\ud83e\udde9 SubCommand"})}),": An executable command inside a ",(0,a.jsx)(n.code,{children:"ParentCommand"}),". Can only be executed via a slash command."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/commands/subcommand-group",children:(0,a.jsx)(n.code,{children:"\ud83d\uddc2\ufe0f SubCommand Group"})}),": An non-executable command inside a ",(0,a.jsx)(n.code,{children:"ParentCommand"})," that only serves to store subcommands."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"-slash-command-execution-sequence",children:"\ud83d\udd22 Slash command execution sequence"}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"A dashed step means it's executed asynchronously, so the next one is inmediately executed."}),"\n",(0,a.jsxs)(n.li,{children:["You can hover over steps with ",(0,a.jsx)(n.code,{children:"(?)"})," to see extra details."]}),"\n"]})}),"\n","\n",(0,a.jsx)(c,{}),"\n",(0,a.jsx)(n.h2,{id:"-creating-a-command",children:"\ud83d\udcda Creating a command"}),"\n",(0,a.jsxs)(n.p,{children:["The overall process of creating a command is to instantiate and register it to a ",(0,a.jsx)(n.code,{children:"CommandManager"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["If the bot has started, it will immediately be deployed to Discord, and its ",(0,a.jsx)(n.code,{children:"ApplicationCommand"})," mapping will be\navailable on the ",(0,a.jsx)(n.code,{children:"CommandDeployer"}),". If the bot hasn't started, it will be queued to be deployed once it starts if\n",(0,a.jsx)(n.code,{children:"deployCommands"})," is true."]}),"\n",(0,a.jsx)(n.p,{children:"Aditionally, commands don't depend on a specific bot, and you can reuse the same instance for many."}),"\n",(0,a.jsx)(n.admonition,{type:"warning",children:(0,a.jsxs)(n.p,{children:["By default, commands are registered using ",(0,a.jsx)(n.code,{children:"ApplicationCommandManager#set()"}),". This means that commands deployed to\nDiscord that are no longer registered will be deleted from there."]})}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsx)(n.p,{children:"Make sure to register all your commands before starting the bot to minimize the amount of API calls, since registering\nthem after the bot has started will cause another API call."})}),"\n",(0,a.jsx)(n.h2,{id:"-quick-examples",children:"\u2728 Quick examples"}),"\n",(0,a.jsxs)(r.A,{children:[(0,a.jsxs)(d.A,{value:"Creating a Ping Command",children:[(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Extend ",(0,a.jsx)(n.code,{children:"AbstractStandaloneCommand"}),", implementing ",(0,a.jsx)(n.code,{children:"execute()"})," and ",(0,a.jsx)(n.code,{children:"createData()"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Register it to a bot's ",(0,a.jsx)(n.code,{children:"CommandManager"}),"."]}),"\n"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"class PingCommand extends AbstractStandaloneCommand {\n  protected createData() {\n    return new SlashCommandBuilder()\n      .setName('ping')\n      .setDescription('Pong!');\n  }\n\n  public async execute(interaction: ChatInputCommandInteraction) {\n    await interaction.reply('Pong!');\n  }\n}\n\nconst command = new PingCommand();\nawait bot.getCommandManager().addCommands(command);\n"})})]}),(0,a.jsxs)(d.A,{value:"Creating a ContextMenuCommand",children:[(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Extend ",(0,a.jsx)(n.code,{children:"AbstractContextMenuCommand"}),", implementing ",(0,a.jsx)(n.code,{children:"createData()"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Implement ",(0,a.jsx)(n.code,{children:"executeUser()"})," if you're making a User Context Menu, or ",(0,a.jsx)(n.code,{children:"executeMessage()"})," if you're making a Message Context Menu."]}),"\n",(0,a.jsxs)(n.li,{children:["Register it to a bot's ",(0,a.jsx)(n.code,{children:"CommandManager"}),"."]}),"\n"]}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"User Context Menu:"}),"\n"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"class NameContextMenuCommand extends AbstractContextMenuCommand {\n  protected createData() {\n    return new ContextMenuCommandBuilder()\n      .setName('name')\n      .setType(ApplicationCommandType.User);\n  }\n\n  public async executeUser(interaction: UserContextMenuCommandInteraction) {\n    const user = interaction.targetUser;\n    await interaction.reply(`This is ${user.username}`);\n  }\n}\n\nconst command = new NameContextMenuCommand();\nawait bot.getCommandManager().addCommands(command);\n"})}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Message Context Menu:"}),"\n"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"class MessageContentContextMenuCommand extends AbstractContextMenuCommand {\n  protected createData() {\n    return new ContextMenuCommandBuilder()\n      .setName('content')\n      .setType(ApplicationCommandType.Message);\n  }\n\n  public async executeMessage(interaction: MessageContextMenuCommandInteraction) {\n    const message = interaction.targetMessage;\n    await interaction.reply(`This message's content is ${message.content}`);\n  }\n}\n\nconst command = new MessageContentContextMenuCommand();\nawait bot.getCommandManager().addCommands(command);\n"})}),(0,a.jsx)(n.admonition,{type:"danger",children:(0,a.jsxs)(n.p,{children:["There won't be any type errors if you don't implement the correspondent execute method for your command (like if you\ndon't implement ",(0,a.jsx)(n.code,{children:"executeUser()"})," with ",(0,a.jsx)(n.code,{children:"ApplicationCommandType.User"}),"), but you'll get a ",(0,a.jsx)(n.code,{children:"NotImplementedError"})," once the\ncommand is actually executed, which will be handled by the ",(0,a.jsx)(n.a,{href:"../../error/error-handling",children:(0,a.jsx)(n.code,{children:"ErrorHandler"})}),"."]})})]}),(0,a.jsxs)(d.A,{value:"Creating a SubCommand",children:[(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Extend ",(0,a.jsx)(n.code,{children:"AbstractParentCommand"}),", implementing ",(0,a.jsx)(n.code,{children:"children"})," and ",(0,a.jsx)(n.code,{children:"createData()"}),". This will be the command containing the subcommand."]}),"\n",(0,a.jsxs)(n.li,{children:["Extend ",(0,a.jsx)(n.code,{children:"AbstractSubCommand"}),", implementing ",(0,a.jsx)(n.code,{children:"execute()"})," and ",(0,a.jsx)(n.code,{children:"createData()"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Register the parent command to a bot's ",(0,a.jsx)(n.code,{children:"CommandManager"}),"."]}),"\n"]}),(0,a.jsx)(n.admonition,{type:"danger",children:(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Do not"})," add the subcommand as an option inside the ",(0,a.jsx)(n.code,{children:"SlashCommandBuilder"}),". The serialization will do that for you, and\nwill actually throw an ",(0,a.jsx)(n.code,{children:"AssertionError"})," if you do that."]})}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"class UserParentCommand extends AbstractParentCommand {\n  protected createData() {\n    return new SlashCommandBuilder()\n      .setName('user')\n      .setDescription('User-related commands');\n  }\n\n  // highlight-start\n  protected children = [\n    new NameSubCommand(this),\n  ]\n  // highlight-end\n}\n\nclass NameSubCommand extends AbstractSubCommand {\n  protected createData() {\n    return new SlashCommandSubcommandBuilder()\n      .setName('name')\n      .setDescription('Returns your name.');\n  }\n\n  public async execute(interaction: ChatInputCommandInteraction) {\n    await interaction.reply(interaction.user.username);\n  }\n}\n\nconst parent = new UserParentCommand();\nawait bot.getCommandManager().addCommands(parent);\n"})}),(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsxs)(n.p,{children:["Instead of implementing ",(0,a.jsx)(n.code,{children:"children"}),", you could also add the subcommand with ",(0,a.jsx)(n.code,{children:"#addChildren()"}),":"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Same classes as above but parent doesn't implement children:\n\nconst parent = new UserParentCommand();\n\nconst subCommand = new NameSubCommand(group);\ngroup.addChildren(subCommand);\n\nawait bot.getCommandManager().addCommands(parent);\n"})})]})]}),(0,a.jsxs)(d.A,{value:"Creating a SubCommandGroup",children:[(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Extend ",(0,a.jsx)(n.code,{children:"AbstractParentCommand"}),", implementing ",(0,a.jsx)(n.code,{children:"children"})," and ",(0,a.jsx)(n.code,{children:"createData()"}),". This will be the command containing the subcommand group."]}),"\n",(0,a.jsxs)(n.li,{children:["Extend ",(0,a.jsx)(n.code,{children:"AbstractSubCommandGroup"}),", implementing ",(0,a.jsx)(n.code,{children:"createData()"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Extend ",(0,a.jsx)(n.code,{children:"AbstractSubCommand"}),", implementing ",(0,a.jsx)(n.code,{children:"execute()"})," and ",(0,a.jsx)(n.code,{children:"createData()"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Register the parent command to a bot's ",(0,a.jsx)(n.code,{children:"CommandManager"}),"."]}),"\n"]}),(0,a.jsx)(n.admonition,{type:"danger",children:(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Do not"})," add the subcommand group as an option inside the ",(0,a.jsx)(n.code,{children:"SlashCommandBuilder"})," or the subcommand inside the\n",(0,a.jsx)(n.code,{children:"SlashCommandSubcommandGroupBuilder"}),". The serialization will do that for you, and will actually throw an ",(0,a.jsx)(n.code,{children:"AssertionError"}),"\nif you do that."]})}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Create the ParentCommand\nclass PhotoParentCommand extends AbstractParentCommand {\n  protected createData() {\n    return new SlashCommandBuilder()\n      .setName('photo')\n      .setDescription('See photos of various things');\n  }\n\n  // highlight-start\n  protected children = [\n    new AnimalPhotoSubCommandGroup(this),\n  ]\n// highlight-end\n}\n\n// Create the SubCommandGroup\nclass AnimalPhotoSubCommandGroup extends AbstractSubCommandGroup {\n  protected createData() {\n    return new SlashCommandSubcommandGroupBuilder()\n      .setName('animal')\n      .setDescription('See animal-related photos');\n  }\n\n  // highlight-start\n  protected children = [\n    new DogSubCommand(this),\n  ]\n  // highlight-end\n}\n\n// Create the SubCommand\nclass DogSubCommand extends AbstractSubCommand {\n  protected createData() {\n    return new SlashCommandSubcommandBuilder()\n      .setName('dog')\n      .setDescription('See a random photo of a dog.');\n  }\n\n  public async execute(interaction: ChatInputCommandInteraction) {\n    const photo = await getRandomDogPhoto();\n    await interaction.reply(photo);\n  }\n}\n\nconst parent = new PhotoParentCommand();\nawait bot.getCommandManager().addCommands(parent);\n"})}),(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsxs)(n.p,{children:["Instead of implementing ",(0,a.jsx)(n.code,{children:"children"}),", you could also add the group (and/or the subcommand) with ",(0,a.jsx)(n.code,{children:"#addChildren()"}),":"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// Same classes as above but parent and group don't implement children:\n\nconst parent = new PhotoParentCommand();\n\n// You can add the group first and then the subcommand or the way around,\n// order doesn't matter.\n\nconst group = new AnimalPhotoSubCommandGroup(parent);\nparent.addChildren(group);\n\nconst subCommand = new DogSubCommand(group);\ngroup.addChildren(subCommand);\n\nawait bot.getCommandManager().addCommands(parent);\n"})})]})]}),(0,a.jsxs)(d.A,{value:"Autocompletion",children:[(0,a.jsxs)(n.p,{children:["From your executable command (a ",(0,a.jsx)(n.code,{children:"StandaloneCommand"})," or ",(0,a.jsx)(n.code,{children:"SubCommand"}),") implement ",(0,a.jsx)(n.code,{children:"autocomplete()"}),"."]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"class AutocompletableCommand extends AbstractStandaloneCommand {\n  public async autocomplete(interaction: AutocompleteInteraction) {\n    await interaction.respond([\n      { name: 'foo', value: 'bar' },\n    ]);\n  }\n}\n"})})]})]}),"\n",(0,a.jsx)(n.h2,{id:"-next",children:"\ud83d\udd1c Next..."}),"\n",(0,a.jsx)(n.p,{children:"Check the documentation of each command type:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/commands/standalone-command",children:(0,a.jsx)(n.code,{children:"\ud83d\ude80 Standalone Command"})}),": A slash command with no children."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"\ud83d\udc64 ContextMenu Command"}),": A context menu command (either User or Message)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/commands/parent-command",children:(0,a.jsx)(n.code,{children:"\ufe0f\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66 Parent Command"})}),": A non-executable command that only serves to store subcommands or subcommand groups."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/commands/subcommand",children:(0,a.jsx)(n.code,{children:"\ud83e\udde9 SubCommand"})}),": An executable command inside a ",(0,a.jsx)(n.code,{children:"ParentCommand"}),". Can only be executed via a slash command."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/commands/subcommand-group",children:(0,a.jsx)(n.code,{children:"\ud83d\uddc2\ufe0f SubCommand Group"})}),": An non-executable command inside a ",(0,a.jsx)(n.code,{children:"ParentCommand"})," that only serves to store subcommands."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Or check what you can do with commands:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Make components that call commands with the ",(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-customid-codec",children:(0,a.jsx)(n.code,{children:"\ud83d\udcac CommandCustomIdCodec"})}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Type safely get command instances on the ",(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-repository",children:(0,a.jsx)(n.code,{children:"\ud83d\udcd4 CommandRepository"})})]}),"\n",(0,a.jsxs)(n.li,{children:["Listen to command events on the ",(0,a.jsx)(n.a,{href:"/nyx/docs/features/commands/command-bus",children:"\ud83d\udce3 EventBus"}),"."]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(x,{...e})}):x(e)}},8759:(e,n,o)=>{o.d(n,{$:()=>S});var t=o(2552),a=o(4415),s=(o(5023),o(1855)),r=o(6840);function d(e){return e+50}function i(e){return e-5}function c(e){return 1===e?120:120+90*(e-1)}function m(e){return e+270}function l(e){const n=h(e).length-15;return n>0?12*n:0}function h(e){if(null===e)return"";switch(typeof e){case"string":case"number":return e.toString();case"boolean":return"";case"object":return e instanceof Array?e.map(h).join(""):"props"in e?h(e.props.children):"";default:return console.warn("Unresolved `node` of type:",typeof e,e),""}}var u=o(3159);const x=(0,s.memo)((e=>{let{data:n}=e;const{label:o,width:s,height:d}=n,{colorMode:i}=(0,t.G)(),c=n.color??{},m="string"==typeof c?c:c[i];return(0,u.jsxs)("div",{className:"actor-node",children:[(0,u.jsx)(a.h7,{type:"source",position:r.yX.Left,id:"s-left"}),(0,u.jsx)(a.h7,{type:"source",position:r.yX.Right,id:"s-right"}),(0,u.jsx)("div",{className:"actor-node__body",style:{width:s??4,height:d??60,backgroundColor:m??("dark"===i?"#585858":"#BABABA")},children:o&&(0,u.jsx)("div",{className:"actor-node__label",style:{width:270+l(o)},children:o})}),(0,u.jsx)(a.h7,{type:"target",position:r.yX.Left,id:"t-left"}),(0,u.jsx)(a.h7,{type:"target",position:r.yX.Right,id:"t-right"})]})})),p="actorNode";function j(e){return`label-${e}`}function f(e,n){return`line-${e}-${n}`}function g(e,n,o){return`label-${e}-${n}-${o}`}function b(e){let{from:n,to:o,fromHandle:t,toHandle:a,animated:s}=e;return{id:`${n}-${o}`,source:n,sourceHandle:`s-${t}`,target:o,targetHandle:`t-${a}`,markerEnd:{type:r.TG.ArrowClosed},type:r.Do.SmoothStep,animated:s}}const C=(0,s.memo)((e=>{let{data:{label:n,width:o,tooltip:t}}=e;return(0,u.jsxs)("div",{className:"step-node",children:[t&&(0,u.jsxs)("div",{className:"step-node__tooltip",children:[(0,u.jsx)("svg",{className:"step-node__tooltip-icon",viewBox:"0 0 16 16",preserveAspectRatio:"X200Y200 meet",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:(0,u.jsx)("path",{d:"M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286m1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94"})}),(0,u.jsx)("span",{className:"step-node__tooltip-label",children:t})]}),(0,u.jsx)(a.h7,{type:"source",position:r.yX.Left,id:"s-left"}),(0,u.jsx)(a.h7,{type:"source",position:r.yX.Right,id:"s-right"}),(0,u.jsx)(a.h7,{type:"source",position:r.yX.Top,id:"s-top"}),(0,u.jsx)(a.h7,{type:"source",position:r.yX.Bottom,id:"s-bottom"}),(0,u.jsx)("div",{className:"step-node__label",style:{width:o??200},children:n}),(0,u.jsx)(a.h7,{type:"target",position:r.yX.Left,id:"t-left"}),(0,u.jsx)(a.h7,{type:"target",position:r.yX.Right,id:"t-right"}),(0,u.jsx)(a.h7,{type:"target",position:r.yX.Top,id:"t-top"}),(0,u.jsx)(a.h7,{type:"target",position:r.yX.Bottom,id:"t-bottom"})]})})),y="stepNode";function w(e,n){const o=[],t=Object.create(null);let a=0,s=0;for(const d of e){const e=m(s)+a;t[d.id]={...d,x:e},s=e,a=l(d.label)}let r=1;for(const[m,l]of n.entries()){const e=t[l.from];if(!e)throw new Error(`A sequence starts from: ${l.from}, but no such actor exists. Sequence: ${v(l)}`);const a="steps"in l?l.steps:[l],s=a.find((e=>e.to===l.from));if(s){if(a.length>1)throw new Error("A sequence with a self-referencing step cannot have more than one step.");r++;const t={id:g(r,e.id,e.id),position:{x:d(e.x),y:i(c(r))+(s.offset??0)},data:{label:s.label,tooltip:s.tooltip},type:y};o.push(t);const h=n[m-1];if(h){const e="steps"in h?{...h.steps[0],from:h.from}:h;if(e.from===l.from&&e.to===l.from)continue}const u={id:f(r-1,e.id),position:{x:e.x-1,y:c(r-1)},data:{color:e.color},type:p};o.push(u);continue}const x=n[m-1];if(x){const n="steps"in x?{...x.steps[0],from:x.from}:x;n.from===l.from&&n.to===l.from&&(r++,o.push({id:f(r,e.id),position:{x:e.x-1,y:c(r)},data:{color:e.color},type:p}),r++)}o.push({id:f(r,e.id),position:{x:e.x-1,y:c(r)},data:{color:e.color},type:p});let j=e;for(const n of a){const e=t[n.to];if(!e)throw new Error(`A sequence leads to: ${n.to}, but no such actor exists. Step: ${v(n)}`);const a=Math.min(e.x,j.x);o.push({id:g(r,j.id,e.id),position:{x:d(a),y:i(c(r))+(n.offset??0)},data:{label:n.label,width:(h=j.x,u=e.x,Math.abs(u-h)-100),tooltip:n.tooltip},type:y}),o.push({id:f(r,e.id),position:{x:e.x-1,y:c(r)},data:{color:e.color},type:p}),j=e}r++}var h,u;const x=c(r-1)+90-50;var b;for(const d of e){const e=t[d.id].x,n={id:(b=d.id,`actorLine-${b}`),position:{x:e,y:50},data:{height:x,width:2},type:p},a={id:j(d.id),position:{x:e-2,y:50},data:{color:d.color,label:d.label,width:6,height:50},type:p};o.unshift(n,a)}return o}function v(e){const n=[];return JSON.stringify(e,(function(e,o){if(null!=o&&"object"==typeof o){if(n.indexOf(o)>=0)return;n.push(o)}return o}))}const S=e=>{const n=w(e.actors,e.events),o=function(e,n){const o=[];let t=1;for(const[a,s]of n.entries()){const r="steps"in s?s.steps:[s];if(0===r.length)throw new Error(`No steps in sequence: ${JSON.stringify(s)}`);let d=s.from;for(const[i,c]of r.entries()){if(s.from===c.to){const e=n[a-1];if(e){const n="steps"in e?{...e.steps[0],from:e.from}:e;if(n.from===n.to&&n.to===s.from){const e=b({from:g(t-1,c.to,c.to),to:g(t,c.to,c.to),fromHandle:"bottom",toHandle:"top",animated:c.animated});o.push(e);continue}}const r=b({from:f(t,d),to:g(t+1,d,c.to),fromHandle:"right",toHandle:"top",animated:c.animated});o.push(r),t++;continue}{const e=n[a-1];if(e&&0===i){const n="steps"in e?{...e.steps[0],from:e.from}:e;if(n.from===n.to){const e=b({from:g(t-1,n.to,n.to),to:f(t,n.to),fromHandle:"bottom",toHandle:"right",animated:n.animated});t++,o.push(e)}}}const r=f(t,d),m=f(t,c.to),l=g(t,d,c.to),h=e.findIndex((e=>e.id===d)),u=e.findIndex((e=>e.id===c.to))>h,x=b({from:r,to:l,fromHandle:u?"right":"left",toHandle:u?"left":"right",animated:c.animated}),p=b({from:l,to:m,fromHandle:u?"right":"left",toHandle:u?"left":"right",animated:c.animated});o.push(x,p),d=c.to}t++}return o}(e.actors,e.events);e.beforeNodes&&n.unshift(...e.beforeNodes),e.afterNodes&&n.push(...e.afterNodes);const{colorMode:r}=(0,t.G)(),d=(0,s.useMemo)((()=>({[y]:C,[p]:x})),[n,o]);return(0,u.jsx)("div",{style:{height:e.height??"60vh"},children:(0,u.jsxs)(a.Gc,{id:e.id,className:"sequence-diagram",nodes:n,edges:o,colorMode:r,edgesReconnectable:!1,elementsSelectable:!1,nodeTypes:d,minZoom:0,fitView:void 0===e.defaultViewport,defaultViewport:e.defaultViewport,children:[(0,u.jsx)(a.VS,{id:e.id,className:"sequence-diagram__background",variant:a._5.Dots,size:1,bgColor:"dark"===r?"#212121":"#f6f8fa"}),(0,u.jsx)(a.H2,{className:"sequence-diagram__controls",fitViewOptions:{duration:200}})]})})}}}]);